<p style="color: green"><%= notice %></p>

<h1 class='text-center font-bold'>Movies</h1>
<div class='flex justify-center'>
  <div class='card w-[500px]'>
    <div id="movies" class='text-center'>
      <p class='font-bold'><%= @movie.title %></p>
      <div class= 'flex items-start justify-center px-1 py-2'>
        <% (0..@movie.rating.to_i-1).each do %>
          <%= image_tag 'star.svg' , style: 'width:20px'%>
        <% end %>
      </div>
    </div>
    <div class='relative flex justify-center'>
      <%= link_to "Next Suggestion",movies_path, class: 'btn-primary'%>
    </div>
  </div>
  
</div>
<% if @current_user.movies.drop(1).present? %>
  <div class='flex justify-center'>
    <div class='card w-[500px]'>
      <p class='font-bold text-center'>History</p>
      <div class=' rounded-lg max-h-[450px] overflow-y-auto'>
        <ul>
          <% @current_user.movies[..-2].each_with_index do |movie, index|%>
            <% if index.even? %>
              <li class='bg-gray-100 flex items-start justify-between rounded px-2'>
                <%=movie.title%> 
                <div class='flex justify-end items-start'>
                  <% (0..movie.rating.to_i-1).each do %>
                    <%= image_tag 'star.svg' , style: 'width:20px'%>
                  <% end %>
                </div>
              </li>
            <% else%>
              <li class='bg-white flex items-start justify-between rounded px-2'> <%=movie.title%> 
                <div class='flex justify-end items-start'>
                    <% (0..movie.rating.to_i-1).each do %>
                      <%= image_tag 'star.svg' , style: 'width:20px'%>
                    <% end %>
                  </div>
              </li>
            <% end %>
          <%end%>
        </ul>
      </div>
      <div class='flex justify-center py-2'>
        <%= button_to "Clear History", clear_history_movies_path, class: 'btn-secondary'%>
      </div>
    </div>
  </div>
<% end %>
<div class='flex justify-center'>
  <%= link_to "Add new movie", new_movie_path, class: 'btn-secondary' %>
</div>
